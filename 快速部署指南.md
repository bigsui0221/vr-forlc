# 🚀 利川水库VR监测系统 - 快速部署指南

## 📌 概览

本项目提供两种部署方式，您可以根据自己的需求和技术水平选择：

1. **🔧 自动部署**（推荐）- 使用PowerShell脚本一键部署
2. **📖 手动部署** - 按照详细指南逐步操作

## 🔧 方式一：自动部署（推荐）

### 准备工作
1. 确保您有Windows服务器的管理员权限
2. 项目文件已放置在服务器上（如 `D:\水库二期\vr-forlc`）

### 一键部署步骤

```powershell
# 1. 以管理员身份打开PowerShell
# 右键点击PowerShell图标 -> "以管理员身份运行"

# 2. 导航到项目目录
cd "D:\水库二期\vr-forlc"

# 3. 运行自动部署脚本（默认使用IIS，IP 192.168.150.253，端口1999）
.\deploy.ps1

# 或者自定义IP、端口和Web服务器
.\deploy.ps1 -IPAddress 192.168.150.253 -Port 1999 -WebServer IIS
```

### 自动部署特点
- ✅ 自动检查和安装所有依赖（Node.js, pnpm）
- ✅ 自动构建项目
- ✅ 自动配置Web服务器（IIS或Nginx）
- ✅ 自动配置防火墙规则
- ✅ 完成后自动打开浏览器

### 脚本参数说明

```powershell
# 查看帮助
.\deploy.ps1 -Help

# 参数说明：
# -IPAddress     指定IP地址（默认192.168.150.253）
# -Port          指定端口（默认1999）
# -WebServer     选择Web服务器：IIS 或 Nginx（默认IIS）
# -SkipDependencies  跳过依赖安装（如果已安装）
```

## 📖 方式二：手动部署

如果您希望完全控制部署过程，或者自动脚本无法正常工作，请参考详细的手动部署指南：

👉 **[查看完整的Windows部署指南.md](./Windows部署指南.md)**

手动部署包含以下步骤：
1. 环境准备（Node.js, pnpm安装）
2. 项目构建
3. Web服务器配置
4. 网络和安全设置
5. 性能优化

## 🌐 部署完成后

### 访问测试
- **内网访问**: `http://192.168.150.253:1999`
- **本地访问**: `http://localhost:1999`
- **外网访问**: 需要配置路由器端口转发

### 常用端口建议
- **端口1999**: 当前配置的默认端口
- **端口80**: HTTP标准端口（需要管理员权限）
- **端口8080**: 常用的Web应用端口
- **端口3000**: 开发测试端口

## 🔍 故障排除

### 常见问题

1. **脚本执行策略错误**
   ```powershell
   Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
   ```

2. **防火墙阻止访问**
   - 检查Windows防火墙设置
   - 检查路由器防火墙设置

3. **VR功能不工作**
   - 确保使用HTTPS（可能需要SSL证书）
   - 检查浏览器对VR的支持

4. **权限不足**
   - 确保以管理员身份运行PowerShell
   - 检查项目目录的读写权限

## 📞 技术支持

如果遇到部署问题：

1. 📋 检查部署日志输出
2. 🔍 查看详细的部署指南
3. 🌐 验证网络连接和防火墙设置
4. 📱 测试不同设备的访问情况

## 🎯 推荐配置

**生产环境推荐：**
- 使用IIS作为Web服务器
- 端口80（HTTP）或443（HTTPS）
- 启用SSL证书（用于VR功能）
- 配置域名解析

**测试环境推荐：**
- 使用端口1999（当前默认配置）
- IP地址：192.168.150.253（内网访问）
- 可以使用Nginx进行快速测试
- 内网访问即可

---

🎉 **祝您部署成功！** 您的利川水库VR监测系统即将为用户提供服务！ 